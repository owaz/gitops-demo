{
  "identifier": "provision-application",
  "title": "Provision Application",
  "description": "Create a new GitOps application folder and Argo CD entry.",
  "trigger": {
    "type": "self-service",
    "operation": "CREATE",
    "userInputs": {
      "properties": {
        "team": {
          "type": "string",
          "title": "Team",
          "description": "Team owning the application (e.g., team-alpha)."
        },
        "appName": {
          "type": "string",
          "title": "Application name",
          "description": "Application identifier used in Kubernetes resources."
        },
        "ingressHost": {
          "type": "string",
          "title": "Ingress host",
          "description": "DNS hostname for ingress routing."
        }
      },
      "required": [
        "team",
        "appName",
        "ingressHost"
      ]
    }
  },
  "invocationMethod": {
    "type": "INTEGRATION_ACTION",
    "installationId": "github-ocean",
    "integrationActionType": "dispatch_workflow",
    "integrationActionExecutionProperties": {
      "org": "owaz",
      "repo": "gitops-demo",
      "workflow": "port-provision-application.yaml",
      "workflowInputs": {
        "team": "{{.inputs.team}}",
        "appName": "{{.inputs.appName}}",
        "ingressHost": "{{.inputs.ingressHost}}",
        "port_context": "{{ toJson . }}"
      },
      "reportWorkflowStatus": true
    }
  },
  "requiredApproval": false,
  "allowAnyoneToViewRuns": true
}